# [201_85] 修复全角空格导致光标移动crash的问题

## 如何测试
- 打开问题文件 `TeXmacs/tests/201_85_unicode_crash.tmu`
- 将光标向右移动到全角括号中间的字符 `（　）`，其中中间字符是 `U+3000`（全角空格）
- 修复后不应crash，光标可正常移动

## 2026/02/27
### What
在特定文档中，光标移动到 `U+3000`（全角空格）位置时会crash。  
调用栈显示崩溃发生在 `decode_from_utf8`，由 `smart_font_rep::get_right_slope` 触发。

根因是该字符在 smart_font.cpp 字体重写路径中被改写为 `REWRITE_IGNORE`，而后会变为空串，随后仍对空串执行 `decode_from_utf8`，导致越界访问。

### How
在 `src/Graphics/Fonts/smart_font.cpp` 的 `smart_font_rep::get_right_slope` 中增加空串保护：
```cpp
bool is_cjk_char=
    (N (r) > 0) && lolly::data::is_cjk_unified_ideographs (r);

string uc  = strict_cork_to_utf8 (r);
int    pos = 0;
int    code= -1;
if (N (uc) > 0) code= decode_from_utf8 (uc, pos);
```

这样即使重写结果为空串，也不会进入 UTF-8 解码，从而避免crash。
