# 215_6: Fix vertical scaling for top image resize handles


### How to Test 
Paste an Image and drag top left (nw) or top right (ne) corner to resize image:

Old effect : Extend on drag in and Shrink on drag out
Fixed effect : Shrink on drag in and Extend on drag out


### Issue #2863 :
When dragging the top resize handles (ne, nw) of an image inwards, 
the image would incorrectly expand instead of shrinking. 

### What
To fix, we replaced `nh` with `(+ oh sy)` in `TeXmacs/progs/generic/format-geometry-edit.scm`:

```scheme
;; BEFORE
((ne) (uniform-scale (/ (+ ow sx) ow) (/ nh oh)))
((nw) (uniform-scale (/ nw ow) (/ nh oh)))
((n)  (when (> nh 0.1) (tree-set! t 2 (cm->str nh)) (refresh-window)))

;; AFTER
((ne) (uniform-scale (/ (+ ow sx) ow) (/ (+ oh sy) oh)))
((nw) (uniform-scale (/ nw ow) (/ (+ oh sy) oh)))
((n)  (when (> (+ oh sy) 0.1) (tree-set! t 2 (cm->str (+ oh sy))) (refresh-window)))
```

### Why 
Because Y increases upwards, stretching an image UP via `ne`, `nw`, `n` results in a positive `sy`. Therefore, the new height is calculated as 
Current Height + Stretch Height â†’ `(oh + sy)`

* Author: Lakshy
* Date: 25-02-2026
