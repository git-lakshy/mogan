# 204_29 表格性能优化

## 如何测试
- 单元测试
  - xmake b table_performance_test
  - xmake r table_performance_test

## 2026/02/22 表格性能测试

### 性能测试结果 (2026-02-22)

| 测试项目 | 时间 (μs) | 备注 |
|---------|----------|------|
| **基础表格测试** | | |
| 1×1 文本表格 | 324 | |
| 1×1 矩阵表格 | 72 | 矩阵单元格包含嵌套结构 |
| 20×20 文本表格 | 1,367 | |
| 20×20 矩阵表格 | 2,410 | 比文本表格慢约1.76倍 |
| 100×100 文本表格 | 35,074 | |
| 100×100 矩阵表格 | 74,337 | 比文本表格慢约2.12倍 |
| **批量创建** | | |
| 5× 20×20 文本表格 | 6,612 | 平均每个1,322 μs |
| 5× 20×20 矩阵表格 | 12,421 | 平均每个2,484 μs |
| **Eqnarray测试** | | |
| Eqnarray 1行 | 76 | |
| Eqnarray 20行 | 133 | |
| Eqnarray 100行 | 707 | |
| 5× Eqnarray 20行 | 702 | 批量创建有优化 |
| **优化测试** | | |
| 40×40 装饰表格 (中位数) | 5,661 | 3×3 TMARKER 装饰，稀疏施加，采样5次 |
| 40×40 普通表格 (中位数) | 5,790 | 采样5次取中位数 |
| 装饰/普通比例 | 0.978 | 时间差小，噪声范围内 |
| 装饰后尺寸变化 | 40×40 → 48×48 | 结构性验证装饰确实生效 |
| 宽度缓存效率 | 1.050 | 几乎无缓存效果 |
| 行高缓存效率 | 1.000 | 几乎无缓存效果 |